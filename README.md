# core

# ISA
RISC-Vベース
+ RV32I
+ RV32M
+ RV32D
+ `froundrm`系(RV32Dに追加)
+ `in`系と`out`系(カスタム)

# その他

+ ビッグエンディアン
+ パイプラインなし

-------------------------------

# モジュール間のタイミングの取り方

## CPU

パイプライン時のステージ間のレジスタの管理をして、下位のモジュールに指示を出すのが役割  

+ **クロックに同期して**小さな処理を開始し、
+ **そのまま**下位のモジュールに仕事を投げ、
+ 出力されたものを**クロックと同期して**受け取る

ので、下位のモジュールは、

+ cpuから送られてきた`order`を受け取ったあと、**次のクロックを待たずに処理を開始**してしまったほうが良い
+ 出力も、**クロックの初めに**(1クロックで終わるなら入力を認識した直後に)`done`**を上げて**、**クロックを待たずに出力する**ほうが望ましい

## メモリ

+ クロック同期でアドレスなどを読み込み、
+ そのクロックのうちに実行し、
+ 次のクロックで出力開始する

ので、アクセスするときには、

+ `order`同期の信号をそのまま送り(1クロック)、
+ 1クロック待ち(2クロック)、
+ メモリの出力とモジュールの出力をつなげる(3クロック)

## レジスタを使用する記憶用モジュール

レジスタを使うときには、

+ クロック同期で入力を代入し、
+ 出力は同期せずにできる
    + が、独立した作業をさせる場合にはクロック同期で出力するようにする

ので、`order`等を使って呼び出すときには、

+ クロックと同期せずに入力して、
+ クロックを待たずに`accepted`や`done`を確認し次第`order`を取り下げる